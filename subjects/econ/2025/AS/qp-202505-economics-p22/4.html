<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economics Q4 - Deflation & Inflation Policy</title>
    
    <!-- MathJax for formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        /* 全屏水印 */
        body::after {
            content: "© Cambridge International 2025";
            position: fixed;
            bottom: 10px;
            right: 10px;
            opacity: 0.1;
            font-size: 24px;
            color: #000;
            pointer-events: none;
            z-index: 9999;
        }
        
        /* 禁用文本选择和复制 */
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-color: #f4fff6;
            padding-top: 60px;
            padding-bottom: 40px;
            max-width: none !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
        }
        
        /* 固定返回箭头 */
        .back-arrow {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 9999;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: #333;
            font-size: 24px;
            font-weight: bold;
            line-height: 1;
            cursor: pointer;
            border: 1px solid #ddd;
        }
        
        /* 严格三区布局 */
        .container {
            width: 98%;
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 450px;
            grid-template-rows: auto auto;
            gap: 20px;
            align-items: start;
        }
        
        /* 题目区：左上 */
        .question-panel {
            grid-column: 1;
            grid-row: 1;
        }
        
        /* 动画区：左下 */
        .animation-panel {
            grid-column: 1;
            grid-row: 2;
        }
        
        /* 答案区：右侧 */
        .answer-panel {
            grid-column: 2;
            grid-row: 1 / span 2;
        }
        
        @media (max-width: 1000px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
            }
            .question-panel {
                grid-column: 1;
                grid-row: 1;
            }
            .animation-panel {
                grid-column: 1;
                grid-row: 2;
            }
            .answer-panel {
                grid-column: 1;
                grid-row: 3;
            }
        }
        
        .card {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 0;
            height: auto;
        }
        
        .question-panel .card {
            min-height: 500px;
        }
        
        .question-panel h3 {
            margin-top: 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            color: #2c3e50;
            font-size: 22px;
        }
        
        .question-text {
            background: #e8f4fd;
            padding: 20px;
            border-left: 4px solid #3498db;
            margin-bottom: 20px;
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            border-radius: 0 8px 8px 0;
        }
        
        .question-text p {
            margin-bottom: 12px;
        }
        
        .animation-panel .card {
            min-height: 550px;
            display: flex;
            flex-direction: column;
        }
        
        .canvas-container {
            width: 100%;
            height: 400px;
            position: relative;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #eee;
            flex-shrink: 0;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: space-between;
        }
        
        button.action-btn {
            flex: 1;
            background-color: #fff;
            color: #333;
            border: 1px solid #ccc;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.2s;
        }
        
        button.action-btn:hover {
            background-color: #f5f5f5;
        }
        
        button.action-btn.active {
            background-color: #7b61ff;
            color: white;
            border-color: #7b61ff;
        }
        
        button.exam-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            flex: 2;
        }
        
        button.exam-btn:hover {
            background-color: #219653;
        }
        
        .data-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            flex-shrink: 0;
        }
        
        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        .data-row:last-child {
            border-bottom: none;
        }
        
        .answer-panel .card {
            height: calc(100vh - 100px);
            max-height: 1200px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .tab {
            padding: 12px 18px;
            cursor: pointer;
            font-weight: bold;
            color: #7f8c8d;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .tab:hover {
            color: #3498db;
        }
        
        .tab.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
            overflow-y: auto;
            flex-grow: 1;
            padding-right: 5px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .analysis-section {
            margin-bottom: 25px;
        }
        
        h4 {
            margin: 20px 0 10px 0;
            color: #2c3e50;
            border-left: 4px solid #3498db;
            padding-left: 12px;
            font-size: 17px;
        }
        
        .explanation p {
            margin-bottom: 10px;
            line-height: 1.6;
            font-size: 15px;
            color: #444;
        }
        
        .highlight-term {
            color: #7b61ff;
            font-weight: bold;
            background-color: #f0f4ff;
            padding: 2px 6px;
            border-radius: 3px;
            border-left: 3px solid #7b61ff;
        }
        
        .highlight-equation {
            color: #d35400;
            font-weight: bold;
            background-color: #fff3cd;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
        }
        
        .model-answer {
            font-family: Georgia, serif;
            font-size: 15.5px;
            line-height: 1.7;
        }
        
        .model-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px dashed #ccc;
        }
        
        .model-section:last-child {
            border-bottom: none;
        }
        
        .model-header {
            font-size: 17px;
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .model-sub {
            font-weight: bold;
            color: #555;
            display: block;
            margin: 12px 0 6px 0;
            font-size: 15px;
        }
        
        .marking-point {
            background: #e8f8f5;
            padding: 10px 15px;
            border-left: 4px solid #1abc9c;
            margin: 10px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .marking-point p {
            margin: 5px 0;
        }
        
        .step {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .step:last-child {
            border-bottom: none;
        }
        
        .step-number {
            display: inline-block;
            background: #3498db;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            margin-right: 8px;
            font-size: 13px;
        }
        
        .policy-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .policy-table th, .policy-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        
        .policy-table th {
            background-color: #3498db;
            color: white;
        }
        
        .policy-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .macro-box {
            background: #f0f4ff;
            border: 2px solid #7b61ff;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .macro-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }
        
        .macro-icon {
            width: 24px;
            height: 24px;
            background: #7b61ff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- 固定返回箭头 -->
    <a href="javascript:history.back()" class="back-arrow">←</a>
    
    <div class="container">
        <!-- 区域1：题目区（左上） -->
        <div class="question-panel">
            <div class="card">
                <h3>9708 Economics / Paper 2 / Section C / Question 4</h3>
                
                <div class="question-text">
                    <!-- 题目原文完整还原 -->
                    <p><strong>EITHER</strong></p>
                    
                    <p><strong>4 (a)</strong> With the help of an AD/AS diagram(s), explain one demand-side and one supply-side cause of deflation and consider which is likely to be more damaging to an economy. [8]</p>
                    
                    <p><strong>(b)</strong> Assess the extent to which using fiscal policy would be the best way to reduce a high rate of inflation. [12]</p>
                    
                    <div class="macro-box">
                        <h4 style="margin-top: 0; color: #7b61ff;">Key Macroeconomic Concepts for Q4</h4>
                        <div class="macro-item">
                            <div class="macro-icon">D</div>
                            <div><strong>Deflation:</strong> Sustained fall in general price level</div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-icon">A</div>
                            <div><strong>AD-AS Model:</strong> Aggregate Demand & Aggregate Supply</div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-icon">F</div>
                            <div><strong>Fiscal Policy:</strong> Government spending (G) & taxation (T)</div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-icon">M</div>
                            <div><strong>Monetary Policy:</strong> Interest rates & money supply</div>
                        </div>
                    </div>
                    
                    <!-- 关键概念对比表格 -->
                    <table class="policy-table">
                        <tr>
                            <th>Policy Type</th>
                            <th>Tools</th>
                            <th>Effect on AD</th>
                            <th>Use Cases</th>
                        </tr>
                        <tr>
                            <td><strong>Contractionary Fiscal Policy</strong></td>
                            <td>↑ Taxes (T), ↓ Government Spending (G)</td>
                            <td>AD decreases (shifts left)</td>
                            <td>Fighting inflation, reducing budget deficit</td>
                        </tr>
                        <tr>
                            <td><strong>Expansionary Fiscal Policy</strong></td>
                            <td>↓ Taxes (T), ↑ Government Spending (G)</td>
                            <td>AD increases (shifts right)</td>
                            <td>Fighting deflation, stimulating growth</td>
                        </tr>
                        <tr>
                            <td><strong>Contractionary Monetary Policy</strong></td>
                            <td>↑ Interest rates, ↓ Money supply</td>
                            <td>AD decreases (shifts left)</td>
                            <td>Fighting inflation, currency stabilization</td>
                        </tr>
                        <tr>
                            <td><strong>Supply-Side Policies</strong></td>
                            <td>Deregulation, training, infrastructure</td>
                            <td>AS increases (shifts right)</td>
                            <td>Long-term growth, reducing cost-push inflation</td>
                        </tr>
                    </table>
                    
                    <p><strong>Mark Scheme Information:</strong></p>
                    <ul>
                        <li><strong>Part (a):</strong> 8 marks total (AO1: 3, AO2: 3, AO3: 2)</li>
                        <li><strong>Part (b):</strong> 12 marks total (AO1/AO2: 8, AO3: 4)</li>
                        <li>For part (b), one-sided responses cannot gain any marks for evaluation</li>
                        <li>Must compare fiscal policy with at least one other policy alternative</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- 区域2：动画区（左下） -->
        <div class="animation-panel">
            <div class="card">
                <h4>AD-AS Model: Deflation Causes & Inflation Control</h4>
                <p>Interactive AD-AS diagram showing demand-side and supply-side causes of deflation, and how contractionary fiscal policy fights inflation.</p>
                
                <div class="canvas-container">
                    <canvas id="adAsCanvas"></canvas>
                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(255, 255, 255, 0.9); padding: 8px; border-radius: 4px; font-size: 12px; border: 1px solid #eee;">
                        <div style="color: #2980b9">● AD = Aggregate Demand</div>
                        <div style="color: #c0392b">● SRAS = Short-Run Aggregate Supply</div>
                        <div style="color: #27ae60">● LRAS = Long-Run Aggregate Supply</div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-row">
                        <span style="font-weight: bold; font-size: 14px;">Select Scenario:</span>
                        <button class="action-btn active" id="deflationBtn" onclick="setScenario('deflation')">Deflation Analysis</button>
                        <button class="action-btn" id="inflationBtn" onclick="setScenario('inflation')">Inflation Control</button>
                    </div>
                    
                    <div class="control-row">
                        <span style="font-weight: bold; font-size: 14px;">Policy Strength:</span>
                        <input type="range" id="policySlider" min="0" max="100" value="30" style="flex: 1; cursor: pointer;" oninput="updateChart()">
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #666; margin-top: -8px;">
                        <span>No Policy</span>
                        <span>Strong Policy</span>
                    </div>
                    
                    <div class="control-row" style="margin-top: 10px;">
                        <button class="action-btn exam-btn" onclick="showExamMode()">★ Show Full Analysis</button>
                        <button class="action-btn" style="background: #95a5a6; color: white; flex: 0.3;" onclick="resetChart()">Reset</button>
                    </div>
                </div>
                
                <div class="data-panel">
                    <div class="data-row">
                        <span>Scenario:</span>
                        <span id="scenarioType" style="color: #7b61ff; font-weight: bold;">Deflation: Demand-Side Cause</span>
                    </div>
                    <div class="data-row">
                        <span>Price Level (P):</span>
                        <span id="priceLevel">P₀ = 100</span>
                    </div>
                    <div class="data-row">
                        <span>Real GDP (Y):</span>
                        <span id="realGDP">Y₀ = 1000</span>
                    </div>
                    <div class="data-row">
                        <span>Unemployment:</span>
                        <span id="unemployment">U = 5%</span>
                    </div>
                    <div class="data-row">
                        <span>Economic Condition:</span>
                        <span id="condition" style="color: #27ae60; font-weight: bold;">At Potential GDP</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 区域3：答案区（右侧） -->
        <div class="answer-panel">
            <div class="card">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('analysis')">Analysis</div>
                    <div class="tab" onclick="switchTab('evaluation')">Evaluation</div>
                    <div class="tab" onclick="switchTab('model')">Model Answer</div>
                </div>
                
                <!-- Analysis Tab -->
                <div id="analysis-tab" class="tab-content active">
                    <div class="analysis-section">
                        <h4>Part (a) - Deflation Causes [8 marks]</h4>
                        
                        <div class="step">
                            <span class="step-number">1</span>
                            <span class="explanation"><strong>AO1 Knowledge and Understanding (max 3 marks):</strong></span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Deflation Definition (1 mark):</strong> A sustained decrease in the general price level of goods and services in an economy over time.</p>
                            <p><strong>Key formula:</strong> If $P_t < P_{t-1}$ for multiple periods, where $P$ = price index.</p>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>AD/AS Diagram Requirement (2 marks):</strong></p>
                            <p>1. Diagram showing fall in price level due to left shift in AD curve (1 mark)</p>
                            <p>2. Diagram showing fall in price level due to right shift in AS curve (1 mark)</p>
                            <p><em>Note:</em> Diagrams must be fully labelled with axes (Price Level vs Real GDP), curves (AD, SRAS, LRAS), and shifts indicated.</p>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">2</span>
                            <span class="explanation"><strong>AO2 Analysis (max 3 marks):</strong> Explaining the causes and effects</span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Demand-Side Cause (1-2 marks):</strong></p>
                            <p>• <strong>Cause:</strong> Decrease in aggregate demand (AD shifts left) due to: lower consumer confidence, higher interest rates, reduced government spending, or falling exports.</p>
                            <p>• <strong>Effect:</strong> Lower price level (P ↓) AND lower real GDP (Y ↓) AND higher unemployment (U ↑).</p>
                            <p>• <strong>Example:</strong> During recession, households save more, consumption falls, AD decreases.</p>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Supply-Side Cause (1-2 marks):</strong></p>
                            <p>• <strong>Cause:</strong> Increase in aggregate supply (AS shifts right) due to: technological improvements, lower production costs, or increased productivity.</p>
                            <p>• <strong>Effect:</strong> Lower price level (P ↓) BUT higher real GDP (Y ↑) AND lower unemployment (U ↓).</p>
                            <p>• <strong>Example:</strong> New technology reduces production costs, firms produce more at lower prices.</p>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">3</span>
                            <span class="explanation"><strong>AO3 Evaluation (max 2 marks):</strong> Which is more damaging?</span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Comparing Damage (1 mark):</strong> Demand-side deflation is generally more damaging because:</p>
                            <ul>
                                <li>It causes both falling prices AND falling output (recession)</li>
                                <li>Leads to rising unemployment and bankruptcies</li>
                                <li>Can create deflationary spiral: falling prices → delayed spending → further price falls</li>
                            </ul>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Conclusion (1 mark):</strong> While both cause falling prices, <span class="highlight-term">demand-side deflation</span> is more damaging as it reduces economic growth and employment, whereas <span class="highlight-term">supply-side deflation</span> is beneficial, increasing output while lowering prices.</p>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>Part (b) - Fiscal Policy vs Inflation [12 marks]</h4>
                        
                        <div class="step">
                            <span class="step-number">1</span>
                            <span class="explanation"><strong>AO1 Knowledge and Understanding:</strong> Fiscal policy tools</span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Contractionary Fiscal Policy:</strong> Used to reduce aggregate demand and inflation.</p>
                            <p>• <strong>Increase Taxes (T ↑):</strong> Reduces disposable income, lowers consumption (C ↓)</p>
                            <p>• <strong>Decrease Government Spending (G ↓):</strong> Direct reduction in AD component</p>
                            <p><strong>AD Formula:</strong> $AD = C + I + G + (X-M)$. If $C$ and $G$ decrease, $AD$ shifts left.</p>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">2</span>
                            <span class="explanation"><strong>AO2 Analysis:</strong> How fiscal policy reduces inflation</span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Mechanism (2 marks):</strong></p>
                            <p>1. Higher taxes/reduced spending → lower disposable income → lower consumption</p>
                            <p>2. AD curve shifts leftward (AD → AD₁)</p>
                            <p>3. New equilibrium: lower price level (P₀ → P₁) AND lower real GDP (Y₀ → Y₁)</p>
                            <p>4. Inflation rate decreases as price growth slows or prices fall</p>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Effectiveness Conditions (2 marks):</strong></p>
                            <p>• Most effective against <span class="highlight-term">demand-pull inflation</span> (AD > AS at full employment)</p>
                            <p>• Less effective against <span class="highlight-term">cost-push inflation</span> (AS shifts left due to higher costs)</p>
                            <p>• Depends on multiplier effect: $\Delta Y = k \times \Delta G$ where $k = \frac{1}{1-MPC}$</p>
                        </div>
                    </div>
                </div>
                
                <!-- Evaluation Tab -->
                <div id="evaluation-tab" class="tab-content">
                    <div class="analysis-section">
                        <h4>Part (a) - Critical Evaluation [2 marks]</h4>
                        
                        <div class="step">
                            <span class="step-number">1</span>
                            <span class="explanation"><strong>Context Matters:</strong> The damage depends on economic conditions:</span>
                            <ul>
                                <li>In a booming economy with inflation, supply-side deflation is beneficial</li>
                                <li>In a recession, demand-side deflation worsens an already weak economy</li>
                                <li>Deflation caused by technological progress (e.g., computers) is generally good</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">2</span>
                            <span class="explanation"><strong>Deflationary Spiral Risk:</strong> Demand-side deflation can become self-reinforcing:</span>
                            <ul>
                                <li>Consumers delay purchases expecting lower prices tomorrow</li>
                                <li>Firms cut production and workers → higher unemployment → lower demand</li>
                                <li>Real debt burden increases (debt deflation) causing bankruptcies</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">3</span>
                            <span class="explanation"><strong>Conclusion:</strong> <span class="highlight-term">Demand-side deflation</span> is typically more damaging due to its negative effects on output and employment, while <span class="highlight-term">supply-side deflation</span> from productivity gains is generally beneficial for economic growth.</span>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>Part (b) - Critical Evaluation [4 marks]</h4>
                        
                        <div class="step">
                            <span class="step-number">1</span>
                            <span class="explanation"><strong>Advantages of Fiscal Policy:</strong></span>
                            <ul>
                                <li><strong>Targeted Impact:</strong> Can be directed at specific sectors or groups</li>
                                <li><strong>Quick Implementation:</strong> Can act faster than monetary policy in some cases</li>
                                <li><strong>Direct Effect:</strong> Changes in G directly affect AD (no transmission lag)</li>
                                <li><strong>Automatic Stabilizers:</strong> Progressive taxes and benefits automatically reduce inflation</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">2</span>
                            <span class="highlight-term">Disadvantages & Limitations:</span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Time Lags (1 mark):</strong></p>
                            <p>• <strong>Recognition Lag:</strong> Takes time to identify inflation problem</p>
                            <p>• <strong>Decision Lag:</strong> Political process delays policy changes</p>
                            <p>• <strong>Implementation Lag:</strong> Time to change tax rates or spending plans</p>
                            <p>• <strong>Effect Lag:</strong> Policies take time to affect the economy</p>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Negative Side Effects (1 mark):</strong></p>
                            <p>• <strong>Reduced Growth:</strong> Lower AD causes lower output and higher unemployment</p>
                            <p>• <strong>Crowding Out:</strong> Government borrowing to finance deficits may raise interest rates, reducing private investment</p>
                            <p>• <strong>Political Constraints:</strong> Tax increases and spending cuts are unpopular</p>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">3</span>
                            <span class="highlight-term">Alternative Policies:</span>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Monetary Policy (1 mark):</strong></p>
                            <p>• <strong>Interest Rate Increases:</strong> Reduce borrowing and spending</p>
                            <p>• <strong>Advantages:</strong> Quicker implementation, independent central banks</p>
                            <p>• <strong>Disadvantages:</strong> May cause currency appreciation hurting exports</p>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Supply-Side Policies (1 mark):</strong></p>
                            <p>• Increase AS to reduce cost-push inflation without reducing output</p>
                            <p>• Examples: Deregulation, training, infrastructure investment</p>
                            <p>• Advantage: Addresses root causes of inflation</p>
                            <p>• Disadvantage: Slow to work (long time lags)</p>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">4</span>
                            <span class="explanation"><strong>Effectiveness Depends on Inflation Type:</strong></span>
                            <ul>
                                <li><strong>Demand-Pull Inflation:</strong> Fiscal policy effective (reduces excess AD)</li>
                                <li><strong>Cost-Push Inflation:</strong> Supply-side policies better (increases AS)</li>
                                <li><strong>Imported Inflation:</strong> Exchange rate policies may be needed</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <span class="step-number">5</span>
                            <span class="explanation"><strong>Conclusion:</strong> Fiscal policy <span class="highlight-term">can be effective</span> in reducing high inflation, especially demand-pull inflation, but it is <span class="highlight-term">not always the best way</span>. The optimal approach depends on:</span>
                            <ol>
                                <li>Type and cause of inflation</li>
                                <li>Current economic conditions (output gap)</li>
                                <li>Time constraints and political feasibility</li>
                                <li>Often a combination of policies works best</li>
                            </ol>
                        </div>
                        
                        <div class="marking-point">
                            <p><strong>Mark Scheme Requirements for AO3 (4 marks):</strong></p>
                            <p>Level 2 (3-4 marks): Clear comparison with at least one other policy, justified conclusion about whether fiscal policy is "best".</p>
                            <p>Level 1 (1-2 marks): Simple evaluative comments, vague conclusion.</p>
                            <p><em>Note: Must compare with another policy. One-sided responses get zero evaluation marks.</em></p>
                        </div>
                    </div>
                </div>
                
                <!-- Model Answer Tab -->
                <div id="model-tab" class="tab-content">
                    <div class="model-answer">
                        <div class="model-section">
                            <div class="model-header">Part (a) - Model Answer [8 Marks]</div>
                            
                            <p>Deflation refers to a sustained fall in the general price level. It can originate from either demand-side or supply-side factors, with different economic consequences.</p>
                            
                            <p><span class="model-sub">Demand-Side Deflation:</span> This occurs when aggregate demand decreases, shifting the AD curve leftwards. Causes include lower consumer confidence, higher interest rates, or reduced government spending. As shown in the AD/AS diagram, this leads to <span class="highlight-term">both lower prices (P₀→P₁) and lower output (Y₀→Y₁)</span>, causing unemployment to rise. This type of deflation is harmful as it indicates weak economic activity.</p>
                            
                            <p><span class="model-sub">Supply-Side Deflation:</span> This results from increased aggregate supply, shifting the AS curve rightwards. Causes include technological improvements or lower production costs. The diagram shows this causes <span class="highlight-term">lower prices (P₀→P₁) but higher output (Y₀→Y₁)</span>, reducing unemployment. This "good deflation" reflects improved productivity.</p>
                            
                            <p><span class="model-sub">Evaluation:</span> Demand-side deflation is more damaging. It creates a vicious cycle: falling prices lead consumers to delay purchases, reducing demand further, causing more price falls and unemployment. In contrast, supply-side deflation benefits the economy through higher output and lower prices. Therefore, while both cause falling prices, their economic impacts differ significantly.</p>
                        </div>
                        
                        <div class="model-section">
                            <div class="model-header">Part (b) - Model Answer [12 Marks]</div>
                            
                            <p>Fiscal policy involves changing government spending (G) and taxation (T) to influence aggregate demand. To reduce inflation, contractionary fiscal policy is used: increasing taxes and/or reducing government spending.</p>
                            
                            <p><span class="model-sub">How it works:</span> Higher taxes reduce disposable income, lowering consumption (C). Reduced government spending directly cuts a component of AD. This shifts the AD curve leftwards, reducing both price level and output, thus lowering inflation.</p>
                            
                            <p><span class="model-sub">Advantages:</span> Fiscal policy can be effective against demand-pull inflation when the economy is overheating. It can be targeted to specific sectors and works directly through the multiplier effect.</p>
                            
                            <p><span class="model-sub">Limitations:</span> However, fiscal policy has several drawbacks. It creates time lags - recognizing inflation, passing legislation, and implementing changes takes time. It also reduces economic growth and increases unemployment. Politically, tax increases and spending cuts are unpopular.</p>
                            
                            <p><span class="model-sub">Alternative policies:</span> Monetary policy (raising interest rates) can also reduce inflation, often with quicker implementation through independent central banks. Supply-side policies (improving productivity) address cost-push inflation without reducing output.</p>
                            
                            <p><span class="model-sub">Conclusion:</span> Fiscal policy can reduce high inflation, but whether it's the "best" way depends on the situation. For demand-pull inflation with a large output gap, it can be effective. However, for cost-push inflation or when quick action is needed, monetary policy may be better. Often, a combination of policies works best, with fiscal policy playing a role alongside other measures.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== 全局变量和参数管理 ====================
        const MACRO_PARAMS = {
            // 当前场景
            scenario: "deflation", // "deflation" or "inflation"
            
            // 政策强度 (0-100)
            policyStrength: 30,
            
            // 是否显示考试模式
            isExamMode: false,
            
            // 初始经济参数
            initialParams: {
                priceLevel: 100,
                realGDP: 1000,
                unemployment: 5,
                inflation: 2.0
            },
            
            // 场景参数
            scenarioParams: {
                deflation: {
                    label: "Deflation Analysis",
                    adShift: -0.3,
                    asShift: 0.2,
                    demandSide: {
                        label: "Demand-Side Cause",
                        adMultiplier: -1.5,
                        asMultiplier: 0,
                        priceEffect: -15,
                        outputEffect: -200,
                        unemploymentEffect: 3
                    },
                    supplySide: {
                        label: "Supply-Side Cause",
                        adMultiplier: 0,
                        asMultiplier: 1.2,
                        priceEffect: -10,
                        outputEffect: 150,
                        unemploymentEffect: -1.5
                    }
                },
                inflation: {
                    label: "Inflation Control",
                    adShift: 0.4,
                    asShift: -0.2,
                    fiscalPolicy: {
                        label: "Contractionary Fiscal Policy",
                        adMultiplier: -1.2,
                        asMultiplier: 0,
                        priceEffect: -8,
                        outputEffect: -150,
                        unemploymentEffect: 2
                    },
                    monetaryPolicy: {
                        label: "Contractionary Monetary Policy",
                        adMultiplier: -0.8,
                        asMultiplier: 0,
                        priceEffect: -6,
                        outputEffect: -100,
                        unemploymentEffect: 1.5
                    }
                }
            }
        };
        
        // ==================== 标签切换功能 ====================
        function switchTab(tabName) {
            // 移除所有标签的active类
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 隐藏所有内容
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // 激活选中的标签
            document.querySelector(`.tab:nth-child(${tabName === 'analysis' ? 1 : tabName === 'evaluation' ? 2 : 3})`).classList.add('active');
            
            // 显示对应的内容
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        // ==================== AD-AS图表功能 ====================
        const adAsCanvas = document.getElementById('adAsCanvas');
        const adAsCtx = adAsCanvas.getContext('2d');
        let canvasWidth, canvasHeight;
        
        // 响应式重绘机制
        function resizeCanvas() {
            if (!adAsCanvas.parentElement) return;
            
            canvasWidth = adAsCanvas.parentElement.clientWidth;
            canvasHeight = adAsCanvas.parentElement.clientHeight;
            adAsCanvas.width = canvasWidth;
            adAsCanvas.height = canvasHeight;
            
            drawChart();
        }
        
        // 三重重绘保障
        function ensureRedraw() {
            // 1. 立即重绘
            resizeCanvas();
            
            // 2. 页面加载后重绘
            window.addEventListener('load', resizeCanvas);
            
            // 3. 延迟重绘
            setTimeout(resizeCanvas, 300);
            setTimeout(resizeCanvas, 1000);
        }
        
        // 设置场景
        function setScenario(scenario) {
            MACRO_PARAMS.scenario = scenario;
            
            // 更新按钮状态
            document.getElementById('deflationBtn').classList.remove('active');
            document.getElementById('inflationBtn').classList.remove('active');
            document.getElementById(`${scenario}Btn`).classList.add('active');
            
            // 重绘图
            updateChart();
        }
        
        // 更新图表（滑块变动时调用）
        function updateChart() {
            MACRO_PARAMS.policyStrength = parseInt(document.getElementById('policySlider').value);
            MACRO_PARAMS.isExamMode = false;
            drawChart();
            updateDataPanel();
        }
        
        // 显示考试模式
        function showExamMode() {
            MACRO_PARAMS.isExamMode = true;
            MACRO_PARAMS.policyStrength = 70;
            document.getElementById('policySlider').value = 70;
            drawChart();
            updateDataPanel();
        }
        
        // 重置图表
        function resetChart() {
            MACRO_PARAMS.isExamMode = false;
            MACRO_PARAMS.policyStrength = 30;
            document.getElementById('policySlider').value = 30;
            drawChart();
            updateDataPanel();
        }
        
        // 绘制AD-AS图表
        function drawChart() {
            if (!canvasWidth || !canvasHeight) return;
            
            // 清除画布
            adAsCtx.clearRect(0, 0, canvasWidth, canvasHeight);
            
            // 当前场景参数
            const scenario = MACRO_PARAMS.scenario;
            const params = MACRO_PARAMS.scenarioParams[scenario];
            const policyEffect = MACRO_PARAMS.policyStrength / 100;
            
            // 设置边距
            const padding = { top: 50, right: 60, bottom: 70, left: 70 };
            const graphWidth = canvasWidth - padding.left - padding.right;
            const graphHeight = canvasHeight - padding.top - padding.bottom;
            
            // 绘制坐标轴
            adAsCtx.beginPath();
            adAsCtx.strokeStyle = '#333';
            adAsCtx.lineWidth = 2;
            
            // Y轴（价格水平）
            adAsCtx.moveTo(padding.left, padding.top);
            adAsCtx.lineTo(padding.left, padding.top + graphHeight);
            
            // X轴（实际GDP）
            adAsCtx.moveTo(padding.left, padding.top + graphHeight);
            adAsCtx.lineTo(padding.left + graphWidth, padding.top + graphHeight);
            adAsCtx.stroke();
            
            // 坐标轴标签
            adAsCtx.font = 'bold 14px Arial';
            adAsCtx.fillStyle = '#333';
            adAsCtx.textAlign = 'center';
            
            // Y轴标签
            adAsCtx.save();
            adAsCtx.translate(20, padding.top + graphHeight / 2);
            adAsCtx.rotate(-Math.PI / 2);
            adAsCtx.fillText("Price Level (P)", 0, 0);
            adAsCtx.restore();
            
            // X轴标签
            adAsCtx.fillText("Real GDP (Y)", padding.left + graphWidth / 2, padding.top + graphHeight + 45);
            
            // 绘制网格线
            adAsCtx.strokeStyle = '#eee';
            adAsCtx.lineWidth = 1;
            
            // 水平网格线
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (i / 5) * graphHeight;
                adAsCtx.beginPath();
                adAsCtx.moveTo(padding.left, y);
                adAsCtx.lineTo(padding.left + graphWidth, y);
                adAsCtx.stroke();
                
                // Y轴刻度标签
                const price = 120 - (i * 20);
                adAsCtx.fillStyle = '#666';
                adAsCtx.font = '12px Arial';
                adAsCtx.textAlign = 'right';
                adAsCtx.fillText(price, padding.left - 10, y + 4);
            }
            
            // 垂直网格线
            for (let i = 0; i <= 5; i++) {
                const x = padding.left + (i / 5) * graphWidth;
                adAsCtx.beginPath();
                adAsCtx.moveTo(x, padding.top);
                adAsCtx.lineTo(x, padding.top + graphHeight);
                adAsCtx.stroke();
                
                // X轴刻度标签
                const gdp = 800 + (i * 200);
                adAsCtx.fillStyle = '#666';
                adAsCtx.font = '12px Arial';
                adAsCtx.textAlign = 'center';
                adAsCtx.fillText(gdp, x, padding.top + graphHeight + 20);
            }
            
            // 绘制长期总供给曲线 (LRAS) - 垂直线
            const lrasX = padding.left + graphWidth * 0.7;
            adAsCtx.beginPath();
            adAsCtx.strokeStyle = '#27ae60';
            adAsCtx.lineWidth = 3;
            adAsCtx.setLineDash([]);
            
            adAsCtx.moveTo(lrasX, padding.top);
            adAsCtx.lineTo(lrasX, padding.top + graphHeight);
            adAsCtx.stroke();
            
            // LRAS标签
            adAsCtx.fillStyle = '#27ae60';
            adAsCtx.font = 'bold 14px Arial';
            adAsCtx.textAlign = 'left';
            adAsCtx.fillText("LRAS (Yfe)", lrasX + 10, padding.top + 20);
            
            // 绘制短期总供给曲线 (SRAS) - 向上倾斜
            adAsCtx.beginPath();
            adAsCtx.strokeStyle = '#c0392b';
            adAsCtx.lineWidth = 2.5;
            adAsCtx.setLineDash([]);
            
            // SRAS起点和终点
            const srasStartY = padding.top + graphHeight * 0.8;
            const srasEndY = padding.top + graphHeight * 0.2;
            const srasStartX = padding.left + graphWidth * 0.2;
            const srasEndX = padding.left + graphWidth * 0.9;
            
            adAsCtx.moveTo(srasStartX, srasStartY);
            
            // 绘制曲线（在LRAS处更陡峭）
            const controlX = lrasX;
            const controlY = (srasStartY + srasEndY) / 2;
            adAsCtx.quadraticCurveTo(controlX, controlY, srasEndX, srasEndY);
            adAsCtx.stroke();
            
            // SRAS标签
            adAsCtx.fillStyle = '#c0392b';
            adAsCtx.fillText("SRAS", srasEndX - 40, srasEndY + 20);
            
            // 绘制初始总需求曲线 (AD) - 向下倾斜
            adAsCtx.beginPath();
            adAsCtx.strokeStyle = '#2980b9';
            adAsCtx.lineWidth = 2.5;
            adAsCtx.setLineDash([]);
            
            // AD起点和终点
            const adStartY = padding.top + graphHeight * 0.2;
            const adEndY = padding.top + graphHeight * 0.8;
            const adStartX = padding.left + graphWidth * 0.1;
            const adEndX = padding.left + graphWidth * 0.8;
            
            adAsCtx.moveTo(adStartX, adStartY);
            adAsCtx.lineTo(adEndX, adEndY);
            adAsCtx.stroke();
            
            // AD标签
            adAsCtx.fillStyle = '#2980b9';
            adAsCtx.fillText("AD₀", adStartX + 20, adStartY - 10);
            
            // 计算初始均衡点 (AD₀与SRAS的交点)
            // 简化计算：线性近似
            const initialEqX = padding.left + graphWidth * 0.5;
            const initialEqY = padding.top + graphHeight * 0.5;
            
            // 标记初始均衡点
            adAsCtx.beginPath();
            adAsCtx.arc(initialEqX, initialEqY, 6, 0, Math.PI * 2);
            adAsCtx.fillStyle = '#e67e22';
            adAsCtx.fill();
            adAsCtx.strokeStyle = '#2c3e50';
            adAsCtx.lineWidth = 2;
            adAsCtx.stroke();
            
            adAsCtx.fillStyle = '#2c3e50';
            adAsCtx.font = 'bold 12px Arial';
            adAsCtx.textAlign = 'right';
            adAsCtx.fillText("E₀", initialEqX - 10, initialEqY - 15);
            
            // 根据场景和政策强度绘制变化
            if (scenario === "deflation") {
                // 通货紧缩场景
                const isDemandSide = MACRO_PARAMS.policyStrength < 50;
                const sideParams = isDemandSide ? params.demandSide : params.supplySide;
                
                // 计算新曲线位置
                const shiftMultiplier = policyEffect;
                
                if (isDemandSide) {
                    // 需求侧：AD左移
                    const newAdStartX = adStartX + sideParams.adMultiplier * shiftMultiplier * 50;
                    const newAdEndX = adEndX + sideParams.adMultiplier * shiftMultiplier * 50;
                    
                    // 绘制新的AD曲线
                    adAsCtx.beginPath();
                    adAsCtx.strokeStyle = '#2980b9';
                    adAsCtx.setLineDash([5, 5]);
                    adAsCtx.lineWidth = 2.5;
                    
                    adAsCtx.moveTo(newAdStartX, adStartY);
                    adAsCtx.lineTo(newAdEndX, adEndY);
                    adAsCtx.stroke();
                    
                    // 恢复实线
                    adAsCtx.setLineDash([]);
                    
                    // 新AD标签
                    adAsCtx.fillStyle = '#2980b9';
                    adAsCtx.fillText("AD₁", newAdStartX + 20, adStartY - 10);
                    
                    // 计算新均衡点
                    const newEqX = initialEqX + (sideParams.outputEffect / 200) * (graphWidth / 5) * shiftMultiplier;
                    const newEqY = initialEqY + (sideParams.priceEffect / 20) * (graphHeight / 5) * shiftMultiplier;
                    
                    // 标记新均衡点
                    adAsCtx.beginPath();
                    adAsCtx.arc(newEqX, newEqY, 6, 0, Math.PI * 2);
                    adAsCtx.fillStyle = '#e74c3c';
                    adAsCtx.fill();
                    adAsCtx.strokeStyle = '#2c3e50';
                    adAsCtx.lineWidth = 2;
                    adAsCtx.stroke();
                    
                    adAsCtx.fillStyle = '#2c3e50';
                    adAsCtx.font = 'bold 12px Arial';
                    adAsCtx.textAlign = 'left';
                    adAsCtx.fillText("E₁", newEqX + 10, newEqY - 15);
                    
                    // 绘制箭头显示移动方向
                    drawArrow(adAsCtx, initialEqX, initialEqY, newEqX, newEqY, '#7b61ff');
                    
                    // 显示通货紧缩类型
                    adAsCtx.fillStyle = '#2c3e50';
                    adAsCtx.font = 'bold 14px Arial';
                    adAsCtx.textAlign = 'center';
                    adAsCtx.fillText("Demand-Side Deflation", canvasWidth / 2, padding.top - 20);
                    
                    adAsCtx.fillStyle = '#e74c3c';
                    adAsCtx.font = 'bold 13px Arial';
                    adAsCtx.fillText("Lower P AND Lower Y (Recession)", canvasWidth / 2, padding.top - 5);
                    
                } else {
                    // 供给侧：AS右移
                    const srasShift = sideParams.asMultiplier * shiftMultiplier * 40;
                    const newSrasStartX = srasStartX + srasShift;
                    const newSrasEndX = srasEndX + srasShift;
                    
                    // 绘制新的SRAS曲线
                    adAsCtx.beginPath();
                    adAsCtx.strokeStyle = '#c0392b';
                    adAsCtx.setLineDash([5, 5]);
                    adAsCtx.lineWidth = 2.5;
                    
                    adAsCtx.moveTo(newSrasStartX, srasStartY);
                    adAsCtx.quadraticCurveTo(lrasX + srasShift/2, (srasStartY + srasEndY) / 2, newSrasEndX, srasEndY);
                    adAsCtx.stroke();
                    
                    // 恢复实线
                    adAsCtx.setLineDash([]);
                    
                    // 新SRAS标签
                    adAsCtx.fillStyle = '#c0392b';
                    adAsCtx.fillText("SRAS₁", newSrasEndX - 40, srasEndY + 20);
                    
                    // 计算新均衡点
                    const newEqX = initialEqX + (sideParams.outputEffect / 200) * (graphWidth / 5) * shiftMultiplier;
                    const newEqY = initialEqY + (sideParams.priceEffect / 20) * (graphHeight / 5) * shiftMultiplier;
                    
                    // 标记新均衡点
                    adAsCtx.beginPath();
                    adAsCtx.arc(newEqX, newEqY, 6, 0, Math.PI * 2);
                    adAsCtx.fillStyle = '#27ae60';
                    adAsCtx.fill();
                    adAsCtx.strokeStyle = '#2c3e50';
                    adAsCtx.lineWidth = 2;
                    adAsCtx.stroke();
                    
                    adAsCtx.fillStyle = '#2c3e50';
                    adAsCtx.font = 'bold 12px Arial';
                    adAsCtx.textAlign = 'left';
                    adAsCtx.fillText("E₁", newEqX + 10, newEqY - 15);
                    
                    // 绘制箭头显示移动方向
                    drawArrow(adAsCtx, initialEqX, initialEqY, newEqX, newEqY, '#7b61ff');
                    
                    // 显示通货紧缩类型
                    adAsCtx.fillStyle = '#2c3e50';
                    adAsCtx.font = 'bold 14px Arial';
                    adAsCtx.textAlign = 'center';
                    adAsCtx.fillText("Supply-Side Deflation", canvasWidth / 2, padding.top - 20);
                    
                    adAsCtx.fillStyle = '#27ae60';
                    adAsCtx.font = 'bold 13px Arial';
                    adAsCtx.fillText("Lower P BUT Higher Y (Growth)", canvasWidth / 2, padding.top - 5);
                }
                
                // 如果处于考试模式，显示比较
                if (MACRO_PARAMS.isExamMode) {
                    adAsCtx.fillStyle = '#e74c3c';
                    adAsCtx.font = 'italic 13px Arial';
                    adAsCtx.fillText("Demand-side more damaging: recession & unemployment", canvasWidth / 2, padding.top + graphHeight + 60);
                }
                
            } else {
                // 通货膨胀控制场景
                const policyParams = params.fiscalPolicy;
                const shiftMultiplier = policyEffect;
                
                // 绘制初始通货膨胀情况 (AD右移超过LRAS)
                const inflationAdStartX = adStartX + params.adShift * 50;
                const inflationAdEndX = adEndX + params.adShift * 50;
                
                adAsCtx.beginPath();
                adAsCtx.strokeStyle = '#2980b9';
                adAsCtx.setLineDash([3, 3]);
                adAsCtx.lineWidth = 2;
                
                adAsCtx.moveTo(inflationAdStartX, adStartY);
                adAsCtx.lineTo(inflationAdEndX, adEndY);
                adAsCtx.stroke();
                
                // 通货膨胀AD标签
                adAsCtx.fillStyle = '#2980b9';
                adAsCtx.font = 'bold 12px Arial';
                adAsCtx.fillText("AD-inflation", inflationAdStartX + 20, adStartY - 10);
                
                // 计算通货膨胀均衡点
                const inflationEqX = lrasX + 30;
                const inflationEqY = padding.top + graphHeight * 0.4;
                
                // 标记通货膨胀均衡点
                adAsCtx.beginPath();
                adAsCtx.arc(inflationEqX, inflationEqY, 6, 0, Math.PI * 2);
                adAsCtx.fillStyle = '#e74c3c';
                adAsCtx.fill();
                adAsCtx.strokeStyle = '#2c3e50';
                adAsCtx.lineWidth = 2;
                adAsCtx.stroke();
                
                adAsCtx.fillStyle = '#2c3e50';
                adAsCtx.font = 'bold 12px Arial';
                adAsCtx.textAlign = 'left';
                adAsCtx.fillText("E-inflation", inflationEqX + 10, inflationEqY - 15);
                
                // 绘制紧缩性财政政策效果 (AD左移回LRAS)
                const contractionAdStartX = inflationAdStartX + policyParams.adMultiplier * shiftMultiplier * 50;
                const contractionAdEndX = inflationAdEndX + policyParams.adMultiplier * shiftMultiplier * 50;
                
                adAsCtx.beginPath();
                adAsCtx.strokeStyle = '#2980b9';
                adAsCtx.setLineDash([5, 5]);
                adAsCtx.lineWidth = 2.5;
                
                adAsCtx.moveTo(contractionAdStartX, adStartY);
                adAsCtx.lineTo(contractionAdEndX, adEndY);
                adAsCtx.stroke();
                
                // 恢复实线
                adAsCtx.setLineDash([]);
                
                // 紧缩AD标签
                adAsCtx.fillStyle = '#2980b9';
                adAsCtx.fillText("AD-policy", contractionAdStartX + 20, adStartY - 25);
                
                // 计算政策后均衡点
                const policyEqX = inflationEqX + (policyParams.outputEffect / 200) * (graphWidth / 5) * shiftMultiplier;
                const policyEqY = inflationEqY + (policyParams.priceEffect / 20) * (graphHeight / 5) * shiftMultiplier;
                
                // 标记政策均衡点
                adAsCtx.beginPath();
                adAsCtx.arc(policyEqX, policyEqY, 6, 0, Math.PI * 2);
                adAsCtx.fillStyle = '#27ae60';
                adAsCtx.fill();
                adAsCtx.strokeStyle = '#2c3e50';
                adAsCtx.lineWidth = 2;
                adAsCtx.stroke();
                
                adAsCtx.fillStyle = '#2c3e50';
                adAsCtx.font = 'bold 12px Arial';
                adAsCtx.textAlign = 'left';
                adAsCtx.fillText("E-policy", policyEqX + 10, policyEqY - 15);
                
                // 绘制箭头显示政策方向
                drawArrow(adAsCtx, inflationEqX, inflationEqY, policyEqX, policyEqY, '#7b61ff');
                
                // 显示政策类型
                adAsCtx.fillStyle = '#2c3e50';
                adAsCtx.font = 'bold 14px Arial';
                adAsCtx.textAlign = 'center';
                adAsCtx.fillText("Contractionary Fiscal Policy", canvasWidth / 2, padding.top - 20);
                
                adAsCtx.fillStyle = '#e74c3c';
                adAsCtx.font = 'bold 13px Arial';
                adAsCtx.fillText("Fights inflation but reduces output", canvasWidth / 2, padding.top - 5);
                
                // 如果处于考试模式，显示副作用
                if (MACRO_PARAMS.isExamMode) {
                    adAsCtx.fillStyle = '#e67e22';
                    adAsCtx.font = 'italic 13px Arial';
                    adAsCtx.fillText("Side effect: Lower growth & higher unemployment", canvasWidth / 2, padding.top + graphHeight + 60);
                }
            }
            
            // 图例
            const legendX = canvasWidth - 180;
            const legendY = padding.top + 30;
            
            adAsCtx.fillStyle = '#2980b9';
            adAsCtx.fillRect(legendX, legendY, 15, 15);
            adAsCtx.fillStyle = '#333';
            adAsCtx.font = '12px Arial';
            adAsCtx.textAlign = 'left';
            adAsCtx.fillText("AD = Aggregate Demand", legendX + 25, legendY + 12);
            
            adAsCtx.fillStyle = '#c0392b';
            adAsCtx.fillRect(legendX, legendY + 25, 15, 15);
            adAsCtx.fillStyle = '#333';
            adAsCtx.fillText("SRAS = Short-Run AS", legendX + 25, legendY + 37);
            
            adAsCtx.fillStyle = '#27ae60';
            adAsCtx.fillRect(legendX, legendY + 50, 15, 15);
            adAsCtx.fillStyle = '#333';
            adAsCtx.fillText("LRAS = Long-Run AS", legendX + 25, legendY + 62);
            
            adAsCtx.fillStyle = '#e67e22';
            adAsCtx.beginPath();
            adAsCtx.arc(legendX + 7, legendY + 85, 6, 0, Math.PI * 2);
            adAsCtx.fill();
            adAsCtx.fillStyle = '#333';
            adAsCtx.fillText("Initial Equilibrium (E₀)", legendX + 25, legendY + 90);
            
            if (MACRO_PARAMS.scenario === "deflation") {
                if (MACRO_PARAMS.policyStrength < 50) {
                    adAsCtx.fillStyle = '#e74c3c';
                    adAsCtx.beginPath();
                    adAsCtx.arc(legendX + 7, legendY + 110, 6, 0, Math.PI * 2);
                    adAsCtx.fill();
                    adAsCtx.fillStyle = '#333';
                    adAsCtx.fillText("Demand-Side Deflation (E₁)", legendX + 25, legendY + 115);
                } else {
                    adAsCtx.fillStyle = '#27ae60';
                    adAsCtx.beginPath();
                    adAsCtx.arc(legendX + 7, legendY + 110, 6, 0, Math.PI * 2);
                    adAsCtx.fill();
                    adAsCtx.fillStyle = '#333';
                    adAsCtx.fillText("Supply-Side Deflation (E₁)", legendX + 25, legendY + 115);
                }
            } else {
                adAsCtx.fillStyle = '#e74c3c';
                adAsCtx.beginPath();
                adAsCtx.arc(legendX + 7, legendY + 110, 6, 0, Math.PI * 2);
                adAsCtx.fill();
                adAsCtx.fillStyle = '#333';
                adAsCtx.fillText("Inflation Point (E-inf)", legendX + 25, legendY + 115);
                
                adAsCtx.fillStyle = '#27ae60';
                adAsCtx.beginPath();
                adAsCtx.arc(legendX + 7, legendY + 135, 6, 0, Math.PI * 2);
                adAsCtx.fill();
                adAsCtx.fillStyle = '#333';
                adAsCtx.fillText("Policy Point (E-policy)", legendX + 25, legendY + 140);
            }
        }
        
        // 绘制箭头函数
        function drawArrow(ctx, fromX, fromY, toX, toY, color) {
            const headLength = 12;
            const dx = toX - fromX;
            const dy = toY - fromY;
            const angle = Math.atan2(dy, dx);
            
            // 绘制线条
            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();
            
            // 绘制箭头头部
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle - Math.PI / 6), 
                      toY - headLength * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(toX - headLength * Math.cos(angle + Math.PI / 6), 
                      toY - headLength * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fill();
        }
        
        // 更新数据面板
        function updateDataPanel() {
            const scenario = MACRO_PARAMS.scenario;
            const params = MACRO_PARAMS.scenarioParams[scenario];
            const policyEffect = MACRO_PARAMS.policyStrength / 100;
            
            // 更新显示
            document.getElementById('scenarioType').textContent = scenario === "deflation" ? 
                (MACRO_PARAMS.policyStrength < 50 ? "Deflation: Demand-Side Cause" : "Deflation: Supply-Side Cause") : 
                "Inflation Control: Fiscal Policy";
            
            // 计算数值
            let price, gdp, unemployment, condition;
            
            if (scenario === "deflation") {
                const isDemandSide = MACRO_PARAMS.policyStrength < 50;
                const sideParams = isDemandSide ? params.demandSide : params.supplySide;
                
                price = MACRO_PARAMS.initialParams.priceLevel + sideParams.priceEffect * policyEffect;
                gdp = MACRO_PARAMS.initialParams.realGDP + sideParams.outputEffect * policyEffect;
                unemployment = MACRO_PARAMS.initialParams.unemployment + sideParams.unemploymentEffect * policyEffect;
                condition = isDemandSide ? "Recession" : "Growth with Lower Prices";
            } else {
                const policyParams = params.fiscalPolicy;
                
                // 从通货膨胀点开始
                const inflationPrice = MACRO_PARAMS.initialParams.priceLevel + 15; // 假设通货膨胀使价格上升
                const inflationGDP = MACRO_PARAMS.initialParams.realGDP + 100; // 假设通货膨胀时GDP略高
                const inflationUnemployment = MACRO_PARAMS.initialParams.unemployment - 1; // 假设通货膨胀时失业率较低
                
                price = inflationPrice + policyParams.priceEffect * policyEffect;
                gdp = inflationGDP + policyParams.outputEffect * policyEffect;
                unemployment = inflationUnemployment + policyParams.unemploymentEffect * policyEffect;
                condition = "Fighting Inflation";
            }
            
            document.getElementById('priceLevel').textContent = `P = ${price.toFixed(1)}`;
            document.getElementById('realGDP').textContent = `Y = ${gdp.toFixed(0)}`;
            document.getElementById('unemployment').textContent = `U = ${unemployment.toFixed(1)}%`;
            
            const conditionElement = document.getElementById('condition');
            conditionElement.textContent = condition;
            
            if (condition.includes("Recession") || condition.includes("Fighting")) {
                conditionElement.style.color = '#e74c3c';
            } else if (condition.includes("Growth")) {
                conditionElement.style.color = '#27ae60';
            } else {
                conditionElement.style.color = '#e67e22';
            }
        }
        
        // ==================== 初始化函数 ====================
        function initializePage() {
            // 初始化标签页
            switchTab('analysis');
            
            // 设置场景
            setScenario('deflation');
            
            // 初始化图表
            ensureRedraw();
            
            // 更新数据面板
            updateDataPanel();
            
            // 禁用右键菜单和文本选择
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // 禁用复制
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });
        }
        
        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>